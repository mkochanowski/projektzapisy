{% extends "statistics/base.html" %}

{% block groups_active %}active{% endblock %}

{% block all-content %}
<div class="table-responsive">
    {% regroup groups by course as courses_list %}

    <table class="table table-striped">
        <thead class="text-muted">
            <tr>
                <th scope="col">Prowadzący</th>
                <th scope="col">Typ</h4>
                <th scope="col">Miejsca</th>
                <th scope="col">Zapisani</th>
                <th scope="col">Kolejka</th>
                <th scope="col">Przypięci</th>

            </tr>
        </thead>
        <tbody>
            {% for course in courses_list %}
                <tr>
                <th colspan="12">{{ course.grouper.name }}</th>
                </tr>
                {% for group in course.list|dictsort:'type' %}
                    <tr{% if group.limit < group.enrolled %} 
                    class="overlimit"{% elif group.limit == group.enrolled %} class="fulllimit"{% endif %}>
                        <td>{{ group.teacher.user.get_full_name }}</td>
                        <td>{{ group.get_type_display }}</td>
                        <td>{{ group.limit }}</td>
                        <td>{{ group.enrolled }}</td>
                        <td>{{ group.queued }}</td>
                        <td>{{ group.pinned }}</td>
                    </tr>
                {% endfor %}
            {% endfor %}
        </tbody>
    </table>
</div>
{% endblock %}